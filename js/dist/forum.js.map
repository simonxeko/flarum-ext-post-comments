{"version":3,"sources":["webpack://@simonxeko/post-threads/webpack/bootstrap","webpack://@simonxeko/post-threads/./forum.js","webpack://@simonxeko/post-threads/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@simonxeko/post-threads/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@simonxeko/post-threads/./src/forum/components/CommentComposer.js","webpack://@simonxeko/post-threads/./src/forum/index.js","webpack://@simonxeko/post-threads/./src/forum/models/Comment.js","webpack://@simonxeko/post-threads/external \"flarum.core.compat['Model']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/Alert']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/Button']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/CommentPost']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/LogInModal']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['extend']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['helpers/icon']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/computed']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/extractText']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/string']\""],"names":["minimizeComposerIfFullScreen","e","app","composer","isFullScreen","minimize","stopPropagation","CommentComposer","init","editor","props","preview","m","route","discussion","initProps","placeholder","extractText","translator","trans","submitLabel","confirmExit","headerItems","items","post","to_user","routeAndMinimize","element","isInitialized","$","on","apply","arguments","add","icon","displayName","id","data","content","relationships","onsubmit","loading","redraw","store","createRecord","save","then","comment","viewingDiscussion","current","stream","update","goToNumber","number","alert","viewButton","Button","component","className","children","onclick","alerts","dismiss","show","Alert","type","message","controls","hide","loaded","bind","ComposerBody","insertMention","quote","user","mention","username","originalContent","cursorPosition","getSelectionRange","preceding","value","slice","precedingNewlines","length","match","insertAtCursor","Array","join","trim","replace","reply","session","canReply","composingReplyTo","forceRefresh","console","log","load","modal","LogInModal","initializers","models","Comment","extend","CommentPost","prototype","isHidden","Model","attribute","hasOne","createdAt","transformDate","contentType","contentHtml","contentPlain","computed","getPlainContent","editedAt","editedUser","isEdited","hiddenAt","hiddenUser","canEdit","canHide","canDelete"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import ComposerBody from 'flarum/components/ComposerBody';\nimport Alert from 'flarum/components/Alert';\nimport Button from 'flarum/components/Button';\nimport icon from 'flarum/helpers/icon';\nimport extractText from 'flarum/utils/extractText';\n\nfunction minimizeComposerIfFullScreen(e) {\n  if (app.composer.isFullScreen()) {\n    app.composer.minimize();\n    e.stopPropagation();\n  }\n}\n\n/**\n * The `CommentComposer` component displays the composer content for replying to a\n * discussion.\n *\n * ### Props\n *\n * - All of the props of ComposerBody\n * - `discussion`\n */\nexport default class CommentComposer extends ComposerBody {\n  init() {\n    super.init();\n\n    this.editor.props.preview = e => {\n      minimizeComposerIfFullScreen(e);\n\n      m.route(app.route.discussion(this.props.discussion, 'reply'));\n    };\n  }\n\n  static initProps(props) {\n    super.initProps(props);\n\n    props.placeholder = props.placeholder || extractText(app.translator.trans('core.forum.composer_reply.body_placeholder'));\n    props.submitLabel = props.submitLabel || app.translator.trans('core.forum.composer_reply.submit_button');\n    props.confirmExit = props.confirmExit || extractText(app.translator.trans('core.forum.composer_reply.discard_confirmation'));\n  }\n\n  headerItems() {\n    const items = super.headerItems();\n    const discussion = this.props.discussion;\n    const post = this.props.post;\n    const to_user = this.props.to_user;\n\n    const routeAndMinimize = function(element, isInitialized) {\n      if (isInitialized) return;\n      $(element).on('click', minimizeComposerIfFullScreen);\n      m.route.apply(this, arguments);\n    };\n\n    items.add('title', (\n      <h3>\n        {icon('fas fa-reply')} {' '}\n        <a href={app.route.post(post)} config={routeAndMinimize}>@{to_user.displayName()}#{post.id()}</a>\n      </h3>\n    ));\n\n    return items;\n  }\n\n  /**\n   * Get the data to submit to the server when the reply is saved.\n   *\n   * @return {Object}\n   */\n  data() {\n    return {\n      content: this.content(),\n      relationships: {\n          discussion: this.props.discussion,\n          post: this.props.post\n      }\n    };\n  }\n\n  onsubmit() {\n    const discussion = this.props.discussion;\n    const post = this.props.post;\n\n    this.loading = true;\n    m.redraw();\n\n    const data = this.data();\n\n    app.store.createRecord('comments').save(data).then(\n      comment => {\n        // If we're currently viewing the discussion which this reply was made\n        // in, then we can update the comment stream and scroll to the comment.\n        if (app.viewingDiscussion(discussion)) {\n          app.current.stream.update().then(() => app.current.stream.goToNumber(comment.number()));\n\n        } else {\n          // Otherwise, we'll create an alert message to inform the user that\n          // their reply has been posted, containing a button which will\n          // transition to their new comment when clicked.\n          let alert;\n          const viewButton = Button.component({\n            className: 'Button Button--link',\n            children: app.translator.trans('core.forum.composer_reply.view_button'),\n            onclick: () => {\n                /// TODODODODOO\n                /// TODODODODOO\n                /// TODODODODOO\n                /// TODODODODOO\n                /// Replace to comment? (Works for display..)\n              m.route(app.route.post(post));\n              app.alerts.dismiss(alert);\n            }\n          });\n          app.alerts.show(\n            alert = new Alert({\n              type: 'success',\n              message: app.translator.trans('core.forum.composer_reply.posted_message'),\n              controls: [viewButton]\n            })\n          );\n        }\n\n        app.composer.hide();\n      },\n      this.loaded.bind(this)\n    );\n  }\n}\n","import { extend } from 'flarum/extend';\r\nimport Button from 'flarum/components/Button';\r\nimport Comment from './models/Comment';\r\nimport CommentPost from 'flarum/components/CommentPost';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport CommentComposer from './components/CommentComposer';\r\nimport LogInModal from 'flarum/components/LogInModal';\r\n\r\nfunction insertMention(post, component, quote) {\r\n  const user = post.user();\r\n  const mention = '@' + (user ? user.username() : post.number()) + '#' + post.id() + ' ';\r\n\r\n  // If the composer is empty, then assume we're starting a new reply.\r\n  // In which case we don't want the user to have to confirm if they\r\n  // close the composer straight away.\r\n  if (!component.content()) {\r\n    component.props.originalContent = mention;\r\n  }\r\n\r\n  const cursorPosition = component.editor.getSelectionRange()[0];\r\n  const preceding = component.editor.value().slice(0, cursorPosition);\r\n  const precedingNewlines = preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\r\n\r\n  component.editor.insertAtCursor(\r\n    Array(precedingNewlines).join('\\n') + // Insert up to two newlines, depending on preceding whitespace\r\n    (quote\r\n      ? '> ' + mention + quote.trim().replace(/\\n/g, '\\n> ') + '\\n\\n'\r\n      : mention)\r\n  );\r\n}\r\n\r\nfunction reply(post, quote) {\r\n  const component = app.composer.component;\r\n  if (component && component.props.post && component.props.post.discussion() === post.discussion()) {\r\n    insertMention(post, component, quote);\r\n  } else {\r\n    \r\n    if (app.session.user) {\r\n      if (post.discussion().canReply()) {\r\n        let component = app.composer.component;\r\n        if (!app.composingReplyTo(post.discussion()) || forceRefresh) {\r\n          console.log(\"Add reply composer.\", );\r\n          component = new CommentComposer({\r\n            user: app.session.user,\r\n            discussion: post.discussion(),\r\n            post: post,\r\n            to_user: post.user() \r\n          });\r\n          app.composer.load(component);\r\n        }\r\n        app.composer.show();\r\n\r\n        if (app.viewingDiscussion(post.discussion()) && ! app.composer.isFullScreen()) {\r\n          app.current.stream.goToNumber('reply');\r\n        }\r\n      }\r\n    } else {\r\n      app.modal.show(new LogInModal());\r\n    }\r\n\r\n  }\r\n} \r\n\r\napp.initializers.add('simonxeko/post-threads', () => {\r\n  console.log('[simonxeko/post-threads] Hello, forum!');\r\n\r\n  app.store.models['comments'] = Comment;\r\n\r\n  extend(CommentPost.prototype, 'actionItems', function (items) {\r\n\r\n    const post = this.props.post;\r\n\r\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\r\n\r\n    items.replace('reply',\r\n      Button.component({\r\n        className: 'Button Button--link',\r\n        children: app.translator.trans('New Reply'),\r\n        onclick: () => reply(post)\r\n      })\r\n    );\r\n  });\r\n\r\n});\r\n","import Model from 'flarum/Model';\nimport computed from 'flarum/utils/computed';\nimport { getPlainContent } from 'flarum/utils/string';\n\nexport default class Comment extends Model {}\n\nObject.assign(Comment.prototype, {\n  number: Model.attribute('number'),\n  discussion: Model.hasOne('discussion'),\n  post: Model.hasOne('post'),\n\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  user: Model.hasOne('user'),\n  contentType: Model.attribute('contentType'),\n  content: Model.attribute('content'),\n  contentHtml: Model.attribute('contentHtml'),\n  contentPlain: computed('contentHtml', getPlainContent),\n\n  editedAt: Model.attribute('editedAt', Model.transformDate),\n  editedUser: Model.hasOne('editedUser'),\n  isEdited: computed('editedAt', editedAt => !!editedAt),\n\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\n  hiddenUser: Model.hasOne('hiddenUser'),\n  isHidden: computed('hiddenAt', hiddenAt => !!hiddenAt),\n\n  canEdit: Model.attribute('canEdit'),\n  canHide: Model.attribute('canHide'),\n  canDelete: Model.attribute('canDelete')\n});\n","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}