{"version":3,"sources":["webpack://@simonxeko/post-threads/webpack/bootstrap","webpack://@simonxeko/post-threads/./forum.js","webpack://@simonxeko/post-threads/./node_modules/@babel/runtime/helpers/esm/extends.js","webpack://@simonxeko/post-threads/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@simonxeko/post-threads/./src/forum/addFlagsToComment.js","webpack://@simonxeko/post-threads/./src/forum/components/Comment.js","webpack://@simonxeko/post-threads/./src/forum/components/CommentComposer.js","webpack://@simonxeko/post-threads/./src/forum/components/CommentsList.js","webpack://@simonxeko/post-threads/./src/forum/components/EditCommentComposer.js","webpack://@simonxeko/post-threads/./src/forum/components/FlagPostModal.js","webpack://@simonxeko/post-threads/./src/forum/index.js","webpack://@simonxeko/post-threads/./src/forum/models/Comment.js","webpack://@simonxeko/post-threads/./src/forum/models/CommentFlag.js","webpack://@simonxeko/post-threads/external \"flarum.core.compat['Component']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['Model']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['app']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/Alert']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/Button']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/CommentPost']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/ComposerBody']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/LogInModal']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['components/Modal']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['extend']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['helpers/avatar']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['helpers/humanTime']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['helpers/icon']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/DiscussionControls']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/ItemList']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/PostControls']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/computed']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/extractText']\"","webpack://@simonxeko/post-threads/external \"flarum.core.compat['utils/string']\""],"names":["extend","Comment","prototype","attrs","props","post","comment_flags","length","className","dismissFlag","data","comment","relationships","freshness","Date","app","cache","some","flag","i","splice","flagIndex","next","nextPost","m","route","redraw","request","url","forum","attribute","apiEndpoint","method","flagActionItems","items","ItemList","controls","PostControls","destructiveControls","Object","keys","forEach","k","get","add","toArray","bind","translator","trans","vdom","flags","isHidden","revealContent","unshift","map","flagReason","type","user","reason","detail","reasonDetail","init","initProps","renderCommentFlag","comment_flag","displayName","view","likes","isLiked","session","console","log","avatar","style","attributes","humanTime","createdAt","content","canLike","likeComment","canEdit","editComment","canDelete","deleteComment","discussion","canReply","replyComment","canFlag","flagComment","canHide","hideComment","Component","minimizeComposerIfFullScreen","e","composer","isFullScreen","minimize","stopPropagation","CommentComposer","editor","preview","placeholder","extractText","submitLabel","confirmExit","headerItems","to_user","routeAndMinimize","element","isInitialized","$","on","apply","arguments","icon","id","onsubmit","target_frame","loading","store","createRecord","save","then","viewingDiscussion","current","stream","update","goToNumber","number","alert","viewButton","Button","component","children","onclick","alerts","dismiss","show","Alert","message","hide","loaded","ComposerBody","CommentsList","insertMention","quote","mention","username","originalContent","cursorPosition","getSelectionRange","preceding","value","slice","precedingNewlines","match","insertAtCursor","Array","join","trim","replace","context","like","composingReplyTo","forceRefresh","load","modal","LogInModal","deferred","EditCommentComposer","resolve","promise","removeComment","contentHtml","FlagPostModal","comments","editedContent","title","success","prop","guidelinesUrl","withAttr","a","undefined","preventDefault","Modal","reply","initializers","models","posts","Model","hasMany","CommentFlag","CommentPost","addFlagsToComment","hasOne","transformDate","contentType","contentPlain","computed","getPlainContent","editedAt","editedUser","isEdited","hiddenAt","hiddenUser"],"mappings":"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","file":"forum.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./forum.js\");\n","export * from './src/forum';\r\n","export default function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}","export default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  subClass.__proto__ = superClass;\n}","import { extend } from 'flarum/extend';\nimport app from 'flarum/app';\nimport Comment from './components/Comment';\nimport Button from 'flarum/components/Button';\nimport ItemList from 'flarum/utils/ItemList';\nimport PostControls from 'flarum/utils/PostControls';\n\n\nexport default function() {\n  extend(Comment.prototype, 'attrs', function(attrs) {\n    if (this.props.post.comment_flags().length) {\n      attrs.className += ' Comment--flagged';\n    }\n  });\n\n  Comment.prototype.dismissFlag = function(data) {\n    const comment = this.props.comment;\n\n    delete comment.data.relationships.comment_flags;\n\n    this.props.post.freshness = new Date();\n\n    if (app.cache.comment_flags) {\n      app.cache.comment_flags.some((flag, i) => {\n        if (flag.comment() === comment) {\n          app.cache.comment_flags.splice(i, 1);\n\n          if (app.cache.flagIndex === comment) {\n            let next = app.cache.comment_flags[i];\n\n            if (!next) next = app.cache.comment_flags[0];\n\n            if (next) {\n              const nextPost = next.comment();\n              app.cache.flagIndex = nextPost;\n              m.route(app.route.comment(nextPost));\n            }\n          }\n\n          return true;\n        }\n      });\n    }\n\n    m.redraw();\n\n    return app.request({\n      url: app.forum.attribute('apiUrl') + comment.apiEndpoint() + '/comment_flags',\n      method: 'DELETE',\n      data\n    });\n  };\n\n  Comment.prototype.flagActionItems = function() {\n    const items = new ItemList();\n\n    const controls = PostControls.destructiveControls(this.props.post);\n\n    Object.keys(controls.items).forEach(k => {\n      const props = controls.get(k).props;\n\n      props.className = 'Button';\n\n      extend(props, 'onclick', () => this.dismissFlag());\n    });\n\n    items.add('controls', (\n      <div className=\"ButtonGroup\">\n        {controls.toArray()}\n      </div>\n    ));\n\n    items.add('dismiss', (\n      <Button className=\"Button\" icon=\"far fa-eye-slash\" onclick={this.dismissFlag.bind(this)}>\n        {app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')}\n      </Button>\n    ), -100);\n\n    return items;\n  };\n\n  extend(Comment.prototype, 'content', function(vdom) {\n    const post = this.props.post;\n    const flags = post.flags();\n\n    if (!flags.length) return;\n\n    if (post.isHidden()) this.revealContent = true;\n\n    vdom.unshift(\n      <div className=\"Comment-flagged\">\n        <div className=\"Comment-flagged-flags\">\n          {flags.map(flag =>\n            <div className=\"Comment-flagged-flag\">\n              {this.flagReason(flag)}\n            </div>\n          )}\n        </div>\n        <div className=\"Comment-flagged-actions\">\n          {this.flagActionItems().toArray()}\n        </div>\n      </div>\n    );\n  });\n\n  Comment.prototype.flagReason = function(flag) {\n    if (flag.type() === 'user') {\n      const user = flag.user();\n      const reason = flag.reason();\n      const detail = flag.reasonDetail();\n\n      return [\n        app.translator.trans(reason ? 'flarum-flags.forum.post.flagged_by_with_reason_text' : 'flarum-flags.forum.post.flagged_by_text', {user, reason}),\n        detail ? <span className=\"Comment-flagged-detail\">{detail}</span> : ''\n      ];\n    }\n  };\n}\n","import Component from 'flarum/Component';\nimport Button from 'flarum/components/Button';\nimport humanTime from 'flarum/helpers/humanTime';\nimport avatar from 'flarum/helpers/avatar';\n\nexport default class Comment extends Component {\n  init() {\n    super.init();\n  }\n\n  static initProps(props) {\n    super.initProps(props);\n  }\n\n  renderCommentFlag(comment_flag) {\n    return (<span>\n      因 {comment_flag.reason() || comment_flag.reasonDetail()} 被 {comment_flag.user().displayName()} 標記\n      <Button className={`Button Button--link`} icon=\"fas fa-eye-slash\" onclick={this.dismissFlag.bind(this)}>\n          {app.translator.trans('flarum-flags.forum.post.dismiss_flag_button')}\n      </Button>\n    </span>);\n  }\n\n  view() {\n      const comment = this.props.comment;\n      const user = comment.user();\n      const likes = comment.likes();\n      const isLiked = app.session.user && likes && likes.some(user => user === app.session.user);\n      const comment_flags = comment.comment_flags();\n      console.log(\"Flags\", comment, likes, comment_flags);\n      return (<div className=\"comment-item\">\n        <div>\n          <div className=\"comment-avatar\">\n              {avatar(user, {style: \"width: 32px; height: 32px;\"})}\n          </div>\n          <div className=\"comment-content\">\n            <strong>{user.data.attributes.displayName}</strong>\n            <span>&nbsp;&nbsp;</span>\n            <em>{humanTime(comment.data.attributes.createdAt)}</em>\n            <span>&nbsp;&nbsp;</span>\n            <strong style=\"color: #660000\">{ comment_flags.length > 0 ? this.renderCommentFlag(comment_flags[0]) : ''}</strong>\n            <div>{comment.data.attributes.content}</div>\n            { comment.data.attributes.canLike ? (\n              <Button className={`Button Button--link`} icon={isLiked ? \"fas fa-thumbs-up\" : \"far fa-thumbs-up\"} onclick={this.props.likeComment}>\n                {likes.length > 0 ? likes.length : app.translator.trans('flarum-likes.forum.post.like_link') }\n              </Button>) : ''}\n            <div class=\"comment-actions\">\n              { comment.data.attributes.canEdit ? (\n                <Button className={`Button Button--link`} icon=\"fas fa-pencil-alt\" onclick={this.props.editComment}>\n                  {app.translator.trans('core.forum.post_controls.edit_button')}\n              </Button>) : ''}\n              { comment.data.attributes.canDelete ? (\n              <Button className={`Button Button--link`} icon=\"fas fa-trash\" onclick={this.props.deleteComment}>\n                  {app.translator.trans('core.forum.post_controls.delete_button')}\n              </Button>) : '' }\n              { this.props.discussion.canReply && !comment.data.attributes.canEdit ? (\n              <Button className={`Button Button--link`} icon=\"fas fa-reply\" onclick={this.props.replyComment}>\n                  {app.translator.trans('flarum-mentions.forum.post.reply_link')}\n              </Button>) : '' }\n              { this.props.post.canFlag && !comment.data.attributes.canEdit ? (\n              <Button className={`Button Button--link`} icon=\"fas fa-flag\" onclick={this.props.flagComment}>\n                  {app.translator.trans('flarum-flags.forum.post_controls.flag_button')}\n              </Button>) : '' }\n              { comment.data.attributes.canHide ? (\n              <Button className={`Button Button--link`} icon=\"far fa-eye-slash\" onclick={this.props.hideComment}>\n                  {app.translator.trans('core.lib.badge.hidden_tooltip')}\n              </Button>) : '' }\n            </div>\n          </div>\n        </div>\n    </div>);\n  }\n}\n","import ComposerBody from 'flarum/components/ComposerBody';\nimport Alert from 'flarum/components/Alert';\nimport Button from 'flarum/components/Button';\nimport icon from 'flarum/helpers/icon';\nimport extractText from 'flarum/utils/extractText';\n\nfunction minimizeComposerIfFullScreen(e) {\n  if (app.composer.isFullScreen()) {\n    app.composer.minimize();\n    e.stopPropagation();\n  }\n}\n\n/**\n * The `CommentComposer` component displays the composer content for replying to a\n * discussion.\n *\n * ### Props\n *\n * - All of the props of ComposerBody\n * - `discussion`\n */\nexport default class CommentComposer extends ComposerBody {\n  init() {\n    super.init();\n\n    this.editor.props.preview = e => {\n      minimizeComposerIfFullScreen(e);\n\n      m.route(app.route.discussion(this.props.discussion, 'reply'));\n    };\n  }\n\n  static initProps(props) {\n    super.initProps(props);\n\n    props.placeholder = props.placeholder || extractText(app.translator.trans('core.forum.composer_reply.body_placeholder'));\n    props.submitLabel = props.submitLabel || app.translator.trans('core.forum.composer_reply.submit_button');\n    props.confirmExit = props.confirmExit || extractText(app.translator.trans('core.forum.composer_reply.discard_confirmation'));\n  }\n\n  headerItems() {\n    const items = super.headerItems();\n    const discussion = this.props.discussion;\n    const post = this.props.post;\n    const comment = this.props.comment;\n    const to_user = this.props.to_user;\n\n    const routeAndMinimize = function(element, isInitialized) {\n      if (isInitialized) return;\n      $(element).on('click', minimizeComposerIfFullScreen);\n      m.route.apply(this, arguments);\n    };\n\n    items.add('title', (\n      <h3>\n        {icon('fas fa-reply')} {' '}\n        <a href={app.route.post(post)} config={routeAndMinimize}>@{to_user.displayName()} #{comment ? comment.id() : post.id()}</a>\n      </h3>\n    ));\n\n    return items;\n  }\n\n  /**\n   * Get the data to submit to the server when the reply is saved.\n   *\n   * @return {Object}\n   */\n  data() {\n    return {\n      content: this.content(),\n      relationships: {\n          discussion: this.props.discussion,\n          post: this.props.post\n      }\n    };\n  }\n\n  onsubmit() {\n    const discussion = this.props.discussion;\n    const post = this.props.post;\n    const target_frame = this.props.target_frame;\n\n    if (target_frame) target_frame.loading = true;\n    this.loading = true;\n    m.redraw();\n\n    const data = this.data();\n\n    app.store.createRecord('comments').save(data).then(\n      comment => {\n        // If we're currently viewing the discussion which this reply was made\n        // in, then we can update the comment stream and scroll to the comment.\n        if (app.viewingDiscussion(discussion)) {\n          app.current.stream.update().then(() => app.current.stream.goToNumber(comment.number())).then(() => { if(target_frame) {target_frame.loading = false;} m.redraw(); } );\n\n        } else {\n          // Otherwise, we'll create an alert message to inform the user that\n          // their reply has been posted, containing a button which will\n          // transition to their new comment when clicked.\n          let alert;\n          const viewButton = Button.component({\n            className: 'Button Button--link',\n            children: app.translator.trans('core.forum.composer_reply.view_button'),\n            onclick: () => {\n                /// TODODODODOO\n                /// TODODODODOO\n                /// TODODODODOO\n                /// TODODODODOO\n                /// Replace to comment? (Works for display..)\n              m.route(app.route.post(post));\n              app.alerts.dismiss(alert);\n            }\n          });\n          app.alerts.show(\n            alert = new Alert({\n              type: 'success',\n              message: app.translator.trans('core.forum.composer_reply.posted_message'),\n              controls: [viewButton]\n            })\n          );\n          if (target_frame) target_frame.loading = false;\n        }\n\n        app.composer.hide();\n      },\n      this.loaded.bind(this)\n    );\n  }\n}\n","import Component from 'flarum/Component';\nimport Comment from './Comment';\nimport EditCommentComposer from './EditCommentComposer';\nimport CommentComposer from './CommentComposer';\nimport FlagPostModal from './FlagPostModal';\n\nexport default class CommentsList extends Component {\n  init() {\n    super.init();\n    // this.comments_data = m.prop(this.props.comments);\n  }\n\n  static initProps(props) {\n    super.initProps(props);\n  }\n\n  \n  insertMention(comment, component, quote) {\n    const user = comment.user();\n    const mention = '@' + (user ? user.username() : ''); // : comment.number()) + '#' + comment.id() + ' ';\n\n    // If the composer is empty, then assume we're starting a new reply.\n    // In which case we don't want the user to have to confirm if they\n    // close the composer straight away.\n    if (!component.content()) {\n      component.props.originalContent = mention;\n    }\n\n    const cursorPosition = component.editor.getSelectionRange()[0];\n    const preceding = component.editor.value().slice(0, cursorPosition);\n    const precedingNewlines = preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\n\n    component.editor.insertAtCursor(\n      Array(precedingNewlines).join('\\n') + // Insert up to two newlines, depending on preceding whitespace\n      (quote\n        ? '> ' + mention + quote.trim().replace(/\\n/g, '\\n> ') + '\\n\\n'\n        : mention)\n    );\n  }\n\n  likeComment(context) {\n    console.log(\"Comment\", this);\n    const likes = this.likes();\n\n    let isLiked = app.session.user && likes && likes.some(user => user === app.session.user);\n\n    isLiked = !isLiked;\n\n    this.save({isLiked});\n\n    // We've saved the fact that we do or don't like the comment, but in order\n    // to provide instantaneous feedback to the user, we'll need to add or\n    // remove the like from the relationship data manually.\n    const data = this.data.relationships.likes.data;\n    data.some((like, i) => {\n      if (like.id === app.session.user.id()) {\n        data.splice(i, 1);\n        return true;\n      }\n    });\n\n    if (isLiked) {\n      data.unshift({type: 'users', id: app.session.user.id()});\n    }\n    context.props.context.props.post.freshness = new Date();\n    m.redraw();\n  }\n\n\n  replyComment(context) {\n    let component = app.composer.component;\n    const post = context.props.post;\n    if (component && component.props.comment && component.props.comment.id() === this.id()) {\n      context.insertMention(comment, component);\n    } else {\n      if (app.session.user) {\n        if (post.discussion().canReply()) {\n          component = app.composer.component;\n          if (!app.composingReplyTo(post.discussion()) || forceRefresh) {\n            console.log(\"Add reply composer.\", );\n            component = new CommentComposer({\n              user: app.session.user,\n              discussion: post.discussion(),\n              post: post,\n              comment: this,\n              to_user: this.user(),\n              target_frame: context\n            });\n            app.composer.load(component);\n          }\n          app.composer.show();\n          context.insertMention(this, component);\n  \n          if (app.viewingDiscussion(post.discussion()) && ! app.composer.isFullScreen()) {\n            app.current.stream.goToNumber('reply');\n          }\n        }\n      } else {\n        app.modal.show(new LogInModal());\n      }\n    }\n  } \n\n  editComment(context) {\n    const deferred = m.deferred();\n\n    const component = new EditCommentComposer({ comment: this, post: context.props.post, discussion: context.props.discussion });\n\n    app.composer.load(component);\n    app.composer.show();\n\n    deferred.resolve(component);\n\n    return deferred.promise;\n  };\n\n  deleteComment(context) {\n    console.log(\"Context\", context);\n    context.props.context.loading = true;\n    m.redraw();\n    this.delete().then(() => {\n      console.log(\"context.props.post\", context.props.post);\n      context.props.context.props.post.removeComment(this.id());\n      context.props.context.props.post.data.attributes.content = \"wtf\";\n      context.props.context.props.post.data.attributes.contentHtml = \"wtf\";\n      context.props.context.props.post.freshness = new Date();\n    }).then(() => {\n      console.log(\"What?\", context.view());\n      context.props.context.loading = false;\n      m.redraw();\n      //m.route.set(\"/\");\n    });\n  };\n\n  flagComment(context) {\n    app.modal.show(new FlagPostModal({comment: this}))\n  };\n\n  view() {\n    return <div class=\"comments-list\">\n      {\n        this.props.comments.map((comment, i) => {\n          return <Comment\n            discussion={this.props.discussion}\n            post={this.props.post}\n            comment={comment}\n            flagComment={this.flagComment.bind(comment,this)}\n            replyComment={this.replyComment.bind(comment, this)}\n            likeComment={this.likeComment.bind(comment, this)}\n            editComment={this.editComment.bind(comment, this)}\n            deleteComment={this.deleteComment.bind(comment, this)}\n          />\n        })\n      }\n    </div>;\n  }\n}\n\n","import ComposerBody from 'flarum/components/ComposerBody';\nimport icon from 'flarum/helpers/icon';\n\nfunction minimizeComposerIfFullScreen(e) {\n    if (app.composer.isFullScreen()) {\n        app.composer.minimize();\n        e.stopPropagation();\n    }\n}\n/**\n * The `EditPostComposer` component displays the composer content for editing a\n * post. It sets the initial content to the content of the post that is being\n * edited, and adds a header control to indicate which post is being edited.\n *\n * ### Props\n *\n * - All of the props for ComposerBody\n * - `post`\n */\nexport default class EditCommentComposer extends ComposerBody {\n  init() {\n    super.init();\n\n    this.editor.props.preview = e => {\n      minimizeComposerIfFullScreen(e);\n\n      m.route(app.route.post(this.props.post));\n    };\n  }\n\n  static initProps(props) {\n    super.initProps(props);\n\n    props.submitLabel = props.submitLabel || app.translator.trans('core.forum.composer_edit.submit_button');\n    props.confirmExit = props.confirmExit || app.translator.trans('core.forum.composer_edit.discard_confirmation');\n    props.originalContent = props.originalContent || props.comment.content();\n    props.user = props.user || props.comment.user();\n\n    props.comment.editedContent = props.originalContent;\n  }\n\n  headerItems() {\n    const items = super.headerItems();\n    const comment = this.props.comment;\n    const post = this.props.post;\n    const discussion = this.props.discussion;\n\n    const routeAndMinimize = function(element, isInitialized) {\n      if (isInitialized) return;\n      $(element).on('click', minimizeComposerIfFullScreen);\n      m.route.apply(this, arguments);\n    };\n\n    items.add('title', (\n      <h3>\n        {icon('fas fa-pencil-alt')} {' '}\n        <a href={app.route.discussion(discussion, post.number())} config={routeAndMinimize}>\n          {app.translator.trans('core.forum.composer_edit.post_link', {number: comment.number(), discussion: discussion.title()})}\n        </a>\n      </h3>\n    ));\n\n    return items;\n  }\n\n  /**\n   * Get the data to submit to the server when the comment is saved.\n   *\n   * @return {Object}\n   */\n  data() {\n    return {\n      content: this.content()\n    };\n  }\n\n  onsubmit() {\n    this.loading = true;\n\n    const data = this.data();\n\n    this.props.comment.save(data).then(\n      () => app.composer.hide(),\n      this.loaded.bind(this)\n    ).then(() => {\n      this.props.post.freshness = new Date();\n      m.redraw();\n    });\n  }\n}\n","import Modal from 'flarum/components/Modal';\nimport Button from 'flarum/components/Button';\n\nexport default class FlagPostModal extends Modal {\n  init() {\n    super.init();\n\n    this.success = false;\n\n    this.reason = m.prop('');\n    this.reasonDetail = m.prop('');\n  }\n\n  className() {\n    return 'FlagPostModal Modal--small';\n  }\n\n  title() {\n    return app.translator.trans('flarum-flags.forum.flag_post.title');\n  }\n\n  content() {\n    if (this.success) {\n      return (\n        <div className=\"Modal-body\">\n          <div className=\"Form Form--centered\">\n            <p className=\"helpText\">{app.translator.trans('flarum-flags.forum.flag_post.confirmation_message')}</p>\n            <div className=\"Form-group\">\n              <Button className=\"Button Button--primary Button--block\" onclick={this.hide.bind(this)}>\n                {app.translator.trans('flarum-flags.forum.flag_post.dismiss_button')}\n              </Button>\n            </div>\n          </div>\n        </div>\n      );\n    }\n\n    const guidelinesUrl = app.forum.attribute('guidelinesUrl');\n\n    return (\n      <div className=\"Modal-body\">\n        <div className=\"Form Form--centered\">\n          <div className=\"Form-group\">\n            <div>\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'off_topic'} value=\"off_topic\" onclick={m.withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_off_topic_text')}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'inappropriate'} value=\"inappropriate\" onclick={m.withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_inappropriate_text', {\n                  a: guidelinesUrl ? <a href={guidelinesUrl} target=\"_blank\"/> : undefined\n                })}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'spam'} value=\"spam\" onclick={m.withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_spam_label')}</strong>\n                {app.translator.trans('flarum-flags.forum.flag_post.reason_spam_text')}\n              </label>\n\n              <label className=\"checkbox\">\n                <input type=\"radio\" name=\"reason\" checked={this.reason() === 'other'} value=\"other\" onclick={m.withAttr('value', this.reason)}/>\n                <strong>{app.translator.trans('flarum-flags.forum.flag_post.reason_other_label')}</strong>\n                {this.reason() === 'other' ? (\n                  <textarea className=\"FormControl\" value={this.reasonDetail()} oninput={m.withAttr('value', this.reasonDetail)}></textarea>\n                ) : ''}\n              </label>\n            </div>\n          </div>\n\n          <div className=\"Form-group\">\n            <Button\n              className=\"Button Button--primary Button--block\"\n              type=\"submit\"\n              loading={this.loading}\n              disabled={!this.reason()}>\n              {app.translator.trans('flarum-flags.forum.flag_post.submit_button')}\n            </Button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  onsubmit(e) {\n    e.preventDefault();\n\n    this.loading = true;\n\n    app.store.createRecord('comment_flags').save({\n      reason: this.reason() === 'other' ? null : this.reason(),\n      reasonDetail: this.reasonDetail(),\n      relationships: {\n        user: app.session.user,\n        comment: this.props.comment\n      }\n    })\n      .then(() => this.success = true)\n      .catch(() => {})\n      .then(this.loaded.bind(this));\n  }\n}\n","import { extend } from 'flarum/extend';\r\nimport Button from 'flarum/components/Button';\r\nimport CommentPost from 'flarum/components/CommentPost';\r\nimport DiscussionControls from 'flarum/utils/DiscussionControls';\r\nimport CommentComposer from './components/CommentComposer';\r\nimport LogInModal from 'flarum/components/LogInModal';\r\nimport Model from 'flarum/Model';\r\nimport Comment from './models/Comment';\r\nimport CommentFlag from './models/CommentFlag';\r\nimport CommentsList from './components/CommentsList';\r\nimport addFlagsToComment from './addFlagsToComment';\r\n\r\n/**\r\n * TODO:\r\n *  - Permission\r\n *  - Hide\r\n *  - Notification\r\n *  - Layout adjustment\r\n * **/ \r\n\r\nfunction insertMention(post, component, quote) {\r\n  const user = post.user();\r\n  const mention = '@' + (user ? user.username() : post.number()) + '#' + post.id() + ' ';\r\n\r\n  // If the composer is empty, then assume we're starting a new reply.\r\n  // In which case we don't want the user to have to confirm if they\r\n  // close the composer straight away.\r\n  if (!component.content()) {\r\n    component.props.originalContent = mention;\r\n  }\r\n\r\n  const cursorPosition = component.editor.getSelectionRange()[0];\r\n  const preceding = component.editor.value().slice(0, cursorPosition);\r\n  const precedingNewlines = preceding.length == 0 ? 0 : 3 - preceding.match(/(\\n{0,2})$/)[0].length;\r\n\r\n  component.editor.insertAtCursor(\r\n    Array(precedingNewlines).join('\\n') + // Insert up to two newlines, depending on preceding whitespace\r\n    (quote\r\n      ? '> ' + mention + quote.trim().replace(/\\n/g, '\\n> ') + '\\n\\n'\r\n      : mention)\r\n  );\r\n}\r\n\r\nfunction reply(post, quote, context) {\r\n  const component = app.composer.component;\r\n  if (component && component.props.post && component.props.post.discussion() === post.discussion()) {\r\n    insertMention(post, component, quote);\r\n  } else {\r\n    \r\n    if (app.session.user) {\r\n      if (post.discussion().canReply()) {\r\n        let component = app.composer.component;\r\n        if (!app.composingReplyTo(post.discussion()) || forceRefresh) {\r\n          console.log(\"Add reply composer.\", );\r\n          component = new CommentComposer({\r\n            user: app.session.user,\r\n            discussion: post.discussion(),\r\n            post: post,\r\n            to_user: post.user(),\r\n            target_frame: context \r\n          });\r\n          app.composer.load(component);\r\n        }\r\n        app.composer.show();\r\n\r\n        if (app.viewingDiscussion(post.discussion()) && ! app.composer.isFullScreen()) {\r\n          app.current.stream.goToNumber('reply');\r\n        }\r\n      }\r\n    } else {\r\n      app.modal.show(new LogInModal());\r\n    }\r\n\r\n  }\r\n} \r\n\r\napp.initializers.add('simonxeko/post-comments', () => {\r\n  console.log('[simonxeko/post-comments] Hello, forum! 123');\r\n  app.store.models.posts.prototype.comments = Model.hasMany('comments');\r\n  app.store.models.posts.prototype.removeComment = function(id) {\r\n    const relationships = this.data.relationships;\r\n    const comments = relationships && relationships.comments;\r\n    if (comments) {\r\n      comments.data.some((data, i) => {\r\n        if (id === data.id) {\r\n          comments.data.splice(i, 1);\r\n          return true;\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  app.store.models.comments = Comment;\r\n  app.store.models.comment_flags = CommentFlag;\r\n\r\n  extend(CommentPost.prototype, 'actionItems', function (items) {\r\n\r\n    const post = this.props.post;\r\n\r\n    if (post.isHidden() || (app.session.user && !post.discussion().canReply())) return;\r\n\r\n    items.replace('reply',\r\n      Button.component({\r\n        className: 'Button Button--link',\r\n        children: app.translator.trans('flarum-mentions.forum.post.reply_link'),\r\n        onclick: () => reply(post, null, this)\r\n      })\r\n    );\r\n  });\r\n\r\n  extend(CommentPost.prototype, 'footerItems', function(items) {\r\n    const post = this.props.post;\r\n    if (post) {\r\n      if (post.data.attributes.contentHtml) {\r\n        const comments = this.props.post.comments();\r\n        if (comments.length > 0) {\r\n          items.add('comments', <CommentsList context={this} discussion={this.props.post.discussion()} post={this.props.post} comments={this.props.post.comments()} />);\r\n        }\r\n      }\r\n    }\r\n  });\r\n\r\n  addFlagsToComment();\r\n\r\n});\r\n","import Model from 'flarum/Model';\nimport computed from 'flarum/utils/computed';\nimport { getPlainContent } from 'flarum/utils/string';\n\nexport default class Comment extends Model {}\n\nObject.assign(Comment.prototype, {\n  number: Model.attribute('number'),\n  discussion: Model.hasOne('discussion'),\n  post: Model.hasOne('post'),\n\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n  user: Model.hasOne('user'),\n\n  contentType: Model.attribute('contentType'),\n  content: Model.attribute('content'),\n  contentHtml: Model.attribute('contentHtml'),\n  contentPlain: computed('contentHtml', getPlainContent),\n\n  editedAt: Model.attribute('editedAt', Model.transformDate),\n  editedUser: Model.hasOne('editedUser'),\n  isEdited: computed('editedAt', editedAt => !!editedAt),\n\n  hiddenAt: Model.attribute('hiddenAt', Model.transformDate),\n  hiddenUser: Model.hasOne('hiddenUser'),\n  isHidden: computed('hiddenAt', hiddenAt => !!hiddenAt),\n\n  canEdit: Model.attribute('canEdit'),\n  canHide: Model.attribute('canHide'),\n  canDelete: Model.attribute('canDelete'),\n\n  likes: Model.hasMany('likes'),\n  comment_flags: Model.hasMany('comment_flags')\n});\n","import Model from 'flarum/Model';\n\nclass CommentFlag extends Model {}\n\nObject.assign(CommentFlag.prototype, {\n  type: Model.attribute('type'),\n  reason: Model.attribute('reason'),\n  reasonDetail: Model.attribute('reasonDetail'),\n  createdAt: Model.attribute('createdAt', Model.transformDate),\n\n  comment: Model.hasOne('comment'),\n  user: Model.hasOne('user')\n});\n\nexport default CommentFlag;\n","module.exports = flarum.core.compat['Component'];","module.exports = flarum.core.compat['Model'];","module.exports = flarum.core.compat['app'];","module.exports = flarum.core.compat['components/Alert'];","module.exports = flarum.core.compat['components/Button'];","module.exports = flarum.core.compat['components/CommentPost'];","module.exports = flarum.core.compat['components/ComposerBody'];","module.exports = flarum.core.compat['components/LogInModal'];","module.exports = flarum.core.compat['components/Modal'];","module.exports = flarum.core.compat['extend'];","module.exports = flarum.core.compat['helpers/avatar'];","module.exports = flarum.core.compat['helpers/humanTime'];","module.exports = flarum.core.compat['helpers/icon'];","module.exports = flarum.core.compat['utils/DiscussionControls'];","module.exports = flarum.core.compat['utils/ItemList'];","module.exports = flarum.core.compat['utils/PostControls'];","module.exports = flarum.core.compat['utils/computed'];","module.exports = flarum.core.compat['utils/extractText'];","module.exports = flarum.core.compat['utils/string'];"],"sourceRoot":""}